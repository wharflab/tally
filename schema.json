{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://json.schemastore.org/tally.json",
  "$defs": {
    "AIConfig": {
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable AI features (opt-in)",
          "default": false
        },
        "command": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "ACP agent command argv (stdio)"
        },
        "timeout": {
          "type": "string",
          "description": "Per-fix timeout (e.g. 90s)",
          "default": "90s"
        },
        "max-input-bytes": {
          "type": "integer",
          "description": "Maximum input bytes sent to agent",
          "default": 262144
        },
        "redact-secrets": {
          "type": "boolean",
          "description": "Redact secrets before sending content to agent",
          "default": true
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "DL3001Config": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$id": "https://github.com/tinovyatkin/tally/internal/rules/hadolint/dl3001-config",
      "properties": {
        "invalid-commands": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for DL3001 rule"
    },
    "DL3026Config": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$id": "https://github.com/tinovyatkin/tally/internal/rules/hadolint/dl3026-config",
      "properties": {
        "trusted-registries": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for DL3026 rule"
    },
    "ExcludeConfig": {
      "properties": {
        "paths": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Glob patterns for files to exclude (e.g. test/**)"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "InlineDirectivesConfig": {
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Process inline ignore directives",
          "default": true
        },
        "warn-unused": {
          "type": "boolean",
          "description": "Warn about unused directives",
          "default": false
        },
        "validate-rules": {
          "type": "boolean",
          "description": "Warn about unknown rule codes in directives",
          "default": false
        },
        "require-reason": {
          "type": "boolean",
          "description": "Require reason= on all ignore directives",
          "default": false
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "OutputConfig": {
      "properties": {
        "format": {
          "type": "string",
          "enum": [
            "text",
            "json",
            "sarif",
            "github-actions",
            "markdown"
          ],
          "description": "Output format",
          "default": "text"
        },
        "path": {
          "type": "string",
          "description": "Output destination: stdout, stderr, or file path",
          "default": "stdout"
        },
        "show-source": {
          "type": "boolean",
          "description": "Show source code snippets in text output",
          "default": true
        },
        "fail-level": {
          "type": "string",
          "enum": [
            "error",
            "warning",
            "info",
            "style",
            "none"
          ],
          "description": "Minimum severity for non-zero exit code",
          "default": "style"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "RuleConfig": {
      "properties": {
        "severity": {
          "type": "string",
          "enum": [
            "off",
            "error",
            "warning",
            "info",
            "style"
          ],
          "description": "Override the rule's default severity"
        },
        "fix": {
          "type": "string",
          "enum": [
            "never",
            "explicit",
            "always",
            "unsafe-only"
          ]
        },
        "exclude": {
          "$ref": "#/$defs/ExcludeConfig",
          "description": "Path patterns where this rule should not run"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "RulesConfig": {
      "properties": {
        "include": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Enable rules by pattern (e.g. buildkit/*)"
        },
        "exclude": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Disable rules by pattern"
        },
        "tally": {
          "additionalProperties": {
            "$ref": "#/$defs/RuleConfig"
          },
          "type": "object",
          "description": "Configuration for tally/* rules"
        },
        "buildkit": {
          "additionalProperties": {
            "$ref": "#/$defs/RuleConfig"
          },
          "type": "object",
          "description": "Configuration for buildkit/* rules"
        },
        "hadolint": {
          "additionalProperties": {
            "$ref": "#/$defs/RuleConfig"
          },
          "type": "object",
          "description": "Configuration for hadolint/* rules"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "SlowChecksConfig": {
      "properties": {
        "mode": {
          "type": "string",
          "enum": [
            "auto",
            "on",
            "off"
          ],
          "description": "When to run slow checks",
          "default": "auto"
        },
        "fail-fast": {
          "type": "boolean",
          "description": "Skip slow checks when errors found",
          "default": true
        },
        "timeout": {
          "type": "string",
          "description": "Timeout for slow checks (e.g. 20s)",
          "default": "20s"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "max-linesConfig": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$id": "https://github.com/tinovyatkin/tally/internal/rules/tally/max-lines-config",
      "properties": {
        "max": {
          "type": "integer",
          "minimum": 0,
          "description": "Maximum number of lines allowed (0 = disabled)",
          "default": 50
        },
        "skip-blank-lines": {
          "type": "boolean",
          "description": "Exclude blank lines from the count",
          "default": true
        },
        "skip-comments": {
          "type": "boolean",
          "description": "Exclude comment lines from the count",
          "default": true
        }
      },
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for max-lines rule"
    },
    "prefer-add-unpackConfig": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$id": "https://github.com/tinovyatkin/tally/internal/rules/tally/prefer-add-unpack-config",
      "properties": {
        "enabled": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for prefer-add-unpack rule"
    },
    "prefer-copy-heredocConfig": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$id": "https://github.com/tinovyatkin/tally/internal/rules/tally/prefer-copy-heredoc-config",
      "properties": {
        "check-single-run": {
          "type": "boolean"
        },
        "check-consecutive-runs": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for prefer-copy-heredoc rule"
    },
    "prefer-multi-stage-buildConfig": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$id": "https://github.com/tinovyatkin/tally/internal/rules/tally/prefer-multi-stage-build-config",
      "properties": {
        "min-score": {
          "type": "integer",
          "minimum": 1,
          "description": "Minimum score required to trigger",
          "default": 4
        }
      },
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for prefer-multi-stage-build rule"
    },
    "prefer-run-heredocConfig": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$id": "https://github.com/tinovyatkin/tally/internal/rules/tally/prefer-heredoc-config",
      "properties": {
        "min-commands": {
          "type": "integer"
        },
        "check-consecutive-runs": {
          "type": "boolean"
        },
        "check-chained-commands": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for prefer-run-heredoc rule"
    }
  },
  "$comment": "Auto-generated on 2026-02-13. Do not edit manually.",
  "properties": {
    "rules": {
      "$ref": "#/$defs/RulesConfig",
      "description": "Rule configuration"
    },
    "output": {
      "$ref": "#/$defs/OutputConfig",
      "description": "Output settings"
    },
    "inline-directives": {
      "$ref": "#/$defs/InlineDirectivesConfig"
    },
    "ai": {
      "$ref": "#/$defs/AIConfig"
    },
    "slow-checks": {
      "$ref": "#/$defs/SlowChecksConfig",
      "description": "Slow checks configuration"
    }
  },
  "additionalProperties": false,
  "type": "object",
  "title": "tally configuration",
  "description": "Configuration schema for tally Dockerfile linter"
}
