# hadolint/DL3022

`COPY --from` should reference a previously defined `FROM` alias.

| Property | Value |
|----------|-------|
| Severity | Warning |
| Category | Correctness |
| Default | Enabled |

## Description

When using multi-stage builds, `COPY --from` should reference a stage alias that was previously defined with `FROM ... AS <alias>`. Trying to copy
from a missing image alias results in an error at build time.

## Examples

### Problematic code

```dockerfile
FROM debian:jesse
RUN stuff

FROM debian:jesse
COPY --from=build some stuff ./
```

### Correct code

```dockerfile
FROM debian:jesse as build
RUN stuff

FROM debian:jesse
COPY --from=build some stuff ./
```

## Reference

- <https://github.com/hadolint/hadolint/wiki/DL3022>
