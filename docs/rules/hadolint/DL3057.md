# hadolint/DL3057

`HEALTHCHECK` instruction missing.

| Property | Value |
|----------|-------|
| Severity | Ignore (off by default) |
| Category | Best Practice |
| Default | Off |

## Description

This is an optional rule. When it is required to define a health check (e.g. by company policy), it must not be omitted.

This rule is disabled by default because a `HEALTHCHECK` is not desirable in all circumstances. Images used with Kubernetes do not benefit from a
`HEALTHCHECK` instruction, as Kubernetes brings its own mechanisms.

## Examples

### Problematic code

```dockerfile
FROM busybox
```

### Correct code

```dockerfile
FROM busybox
HEALTHCHECK CMD /bin/health
```

or:

```dockerfile
FROM busybox
HEALTHCHECK NONE
```

## tally enhancements

tally extends this rule with **async registry resolution** (enabled with `--slow-checks`):

- **Base image inspection**: For each external base image, tally checks if it already defines a `HEALTHCHECK` in its image metadata. If so, the
  violation is suppressed since the health check is inherited.
- **Useless NONE detection**: Detects `HEALTHCHECK NONE` when the base image has no `HEALTHCHECK` to disable, flagging it as unnecessary.
- **Cross-rule awareness**: Evaluates only the last `HEALTHCHECK` per stage (consistent with `buildkit/MultipleInstructionsDisallowed`).

## Reference

- [hadolint/DL3057](https://github.com/hadolint/hadolint/wiki/DL3057)
