# hadolint/DL3023

`COPY --from` cannot reference its own `FROM` alias.

| Property | Value |
|----------|-------|
| Severity | Error |
| Category | Correctness |
| Default | Enabled |

## Description

A `COPY --from` instruction must not reference the same stage it is running in. Trying to copy from the current stage results in an error because the
stage has not yet been finalized.

## Examples

### Problematic code

```dockerfile
FROM debian:jesse as build
COPY --from=build some stuff ./
```

### Correct code

```dockerfile
FROM debian:jesse as build
RUN stuff

FROM debian:jesse
COPY --from=build some stuff ./
```

## Reference

- [hadolint/DL3023](https://github.com/hadolint/hadolint/wiki/DL3023)
